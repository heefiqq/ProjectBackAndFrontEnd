@{
    ViewBag.Title = "Home Page";
}

<div class="jumbotron">
    <h1>This test project</h1>
</div>

<div class="row">
    <div class="col-lg-1">
        <input type="button" class="btn btn-primary" value="Создать" onclick="createCustomer()"/>
    </div>
    <div class="col-lg-offset-12"></div>
    <div class="col-lg-12" id="customerTable"></div>
</div>


<script>

    var customerTablePage = @ViewBag.Page;
    var orderTablePage = 1;

    $(document).ready(function () {
        fetchTableCustomers(customerTablePage);

        tablePaging('#customerTable', fetchTableCustomers);
    })

    function createCustomer() {
        createModal({ url: '/CreateCustomer', methi: 'GET', modalId: 'addEditCustomerModal' });
    }

    function editCustomer(id) {
        createModal({
            url: '/EditCustomer',
            method: 'GET',
            modalId: 'addEditCustomerModal',
            id: id,
            fetchTableFn: fetchTableCustomers,
            page: customerTablePage
        });

        fetchTableOrders(orderTablePage);

        tablePaging('#orderTable', fetchTableOrders);
    }

    function deleteCustomer(id) {
        deleteData({
            url: '/DeleteCustomer',
            id: id,
            fetchTableFn: fetchTableCustomers,
            page: customerTablePage
        });
    }

    function createOrder() {
        createModal({ url: '/CreateOrder', method: 'GET', modalId: 'addEditOrderModal'});
    }

    function editOrder(id) {
        createModal({
            url: '/EditOrder',
            method: 'GET',
            modalId: 'addEditOrderModal',
            id: id,
            fetchTableFn: fetchTableOrders,
            page: orderTablePage
        });
    }

    function deleteOrder(id) {
        deleteData({
            url: '/DeleteOrder',
            id: id,
            fetchTableFn: fetchTableOrders,
            page: orderTablePage
        });
    }
</script>